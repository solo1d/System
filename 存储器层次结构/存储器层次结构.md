# 存储器层次结构

如果你理解了系统是如何将数据在存储器层次结构中上上下下移动的, 那么你就可以编写自己的应用程序,  使得它们的数据项存储在层次结构中较高的地方, 在那里CPU 能更快的访问到它们.

**访问周期越短, 层次越高.**

* 寄存器
  * 在 0 个周期内就可以访问到.
* 高速缓存
  * 在 4~75 个周期内可以访问到.
* 主存  \(内存\)
  * 在 上百个周期内可以访问到.
* 磁盘  \(辅助存储\)
  * 大约需要上百万个周期才可以访问到.  \(按照目前的技术,能缩短到十万以内\)

## 随机访问存储器

* 随机访问存储器 \(RAM\)  分为两类
  * 静态  RAM\(SRAM\)
    * 用作高速缓存存储器, 可以在CPU芯片上 ,也可以在片下.
  * 动态  RAM\(DRAM\)
    * 用作主存以及图形系统的帧缓冲区
* 静态 比 动态 速度更快, 但也更贵.
* 静态 比 动态  容量更小, 几百或上千倍.

### 传统的 DRAM \(动态\)

* 超单元 \(字节\)  d 
  * 每个超单元都由 w 个DRAM单元组成,\(一般是8个\)

![](../.gitbook/assets/ping-mu-kuai-zhao-20190823-shang-wu-11.44.22.png)

## 磁盘容量计算

$$
磁盘容量=扇区字节*平均扇区数*磁道(或柱面)*盘面(2)*盘片
$$

* 例子:
  * **`一个`**磁盘, 有**`5个`盘片**, 每个**扇区`512字节`**, 每个**盘面`20 000个磁道`**, 每条**磁道平均`300个扇区,`** 每个**盘**有**`2个面`**
    * 磁盘容量 = 512字节 \* 300扇区 \* 20 000磁道 \* 2盘面 \* 5盘片
    * 磁盘容量 = 30 720 000 000 字节
    * 磁盘容量 = 30.72GB   \(  $$1GB = 10^9 $$ \)
  * 一个磁盘, 2个盘片, 10000个柱面, 每条磁道平均400个扇区, 每个扇区有512字节.
    * 磁盘容量 = 512字节 \* 400扇区 \* 10 000柱面 \* 2盘面 \* 2盘片
    * 磁盘容量 = 8 192 000 000 字节
    * 磁盘容量 = 8.192 GB

## 磁盘操作

磁盘是以扇区大小的块来读写数据.

* 对扇区的访问时间有三个主要部分
  * **寻道时间**
    * 为了读取某个目标扇区的内容,传动臂首先将 读/写 头定位到包含目标扇区的磁道上, 移动传动臂所需的时间称为寻道时间.
    * 寻道时间 **`Tseek`** 依赖于 读/写 头以前的位置和传动臂在盘面上移动的速度.\(通常3~9ms 毫秒\)
  * **旋转时间**
    * 一旦 读/写 头定位到了期望的磁道,驱动器等待目标扇区的第一个位旋转到 读/写 头下.
    * **`Trotation`** 的性能依赖于 当 读/写 头达到目标扇区时盘面的位置以及磁盘的旋转速度.
      * **`T max rotarion  =  1/RPM  *  60s/1min ;`**  `RPM是转速 一般是5200到17000`
      * `平均旋转时间` **`T avg rotation`** `是`  **`T max rotation`** `的一半.`
  * 传送时间
    * 当目标扇区的第一个位 位于读/写头下时, 驱动器就可以开始读或者写该扇区的内容.
    * 一个扇区的传送时间依赖于旋转速度和每条磁道的扇区数目.
      *  **`T avg transfer  = 1/RPM   *  1/(平均扇区数/磁道)  * 60s/1min`**

![](../.gitbook/assets/ping-mu-kuai-zhao-20190823-xia-wu-8.34.07.png)









